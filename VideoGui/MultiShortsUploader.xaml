<Window x:Name="frmMultiShortsUploader" x:Class="VideoGui.MultiShortsUploader"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VideoGui" Loaded="Window_Loaded"
        xmlns:MSU="clr-namespace:CustomComponents.ListBoxExtensions;assembly=CustomComponents"
        SizeChanged="Window_SizeChanged" 
        ResizeMode="CanResize" WindowStartupLocation="CenterScreen" 
        WindowStyle="ToolWindow"
        mc:Ignorable="d" 
        Title="Multi Shorts Uploader" Height="439" Width="559">
    <Window.Resources>
        <BitmapImage x:Key="SET" UriSource="icons/set.png"/>
        <BitmapImage x:Key="EDIT" UriSource="icons/edit.png"/>
        <BitmapImage x:Key="STEPON" UriSource="icons/stepon.png"/>
        <BitmapImage x:Key="STEPOFF" UriSource="icons/stepoff.png"/>
        <Style x:Key="ToggleStepStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Height" Value="23"/>
            <Setter Property="Width" Value="45"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Image x:Name="PART_Image"  />
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter TargetName="PART_Image" Property="Source" Value="{StaticResource STEPON}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="False">
                                <Setter TargetName="PART_Image" Property="Source" Value="{StaticResource STEPOFF}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ToggleSetEditStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Height" Value="23"/>
            <Setter Property="Width" Value="45"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Image x:Name="PART_Image"  />
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter TargetName="PART_Image" Property="Source" Value="{StaticResource EDIT}"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="False">
                                <Setter TargetName="PART_Image" Property="Source" Value="{StaticResource SET}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <ScrollViewer x:Name="MainScroller" VerticalScrollBarVisibility="Hidden" 
                  HorizontalScrollBarVisibility="Disabled" HorizontalAlignment="Left" VerticalAlignment="Top">
        <Grid Width="560" Height="873" x:Name="MainGrid" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Loading Panel -->
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="445*"/>
                <RowDefinition Height="8*"/>
                <!-- Main Content -->
            </Grid.RowDefinitions>

            <!-- Loading Panel -->
            <Canvas x:Name="LoadingPanel" Height="420" d:Height="0" HorizontalAlignment="Left" Width="556" VerticalAlignment="Top" Grid.RowSpan="2">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Canvas.Left="179" Canvas.Top="189">
                    <TextBlock Text="Loading..." FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                    <ProgressBar IsIndeterminate="True" Width="200" Height="20"/>
                </StackPanel>
            </Canvas>

            <!-- Main Content -->
            <Canvas x:Name="MainContent" Grid.Row="1" Height="420" 
                    HorizontalAlignment="Center" Width="558" VerticalAlignment="Center">
                <MSU:MultiListbox x:Name="msuShorts" Header="Active Shorts Directory" ItemHeight="15"
                   HorizontalAlignment="Left" VerticalAlignment="Center" Width="560" Height="162" 
                     SizeChanged="msuShorts_SizeChanged" ResizeDirection="Bottom" Canvas.Top="0">
                    <MSU:MultiListbox.ColumnDefinitions>
                        <MSU:MultiListboxColumnDefinition HeaderText="Shorts Directory" 
                      DataField="DirectoryName" WidthBinding="ShortsDirectoryNameWidth"  
                         FontWeight="AutoFontWeight"  ComponentType="TextBlock"/>
                        <MSU:MultiListboxColumnDefinition HeaderText="Number Of Shorts" Width="105" 
                        ContentHorizontalAlignment="Center" FontWeight="AutoFontWeight" 
                        DataField="NumberOfShorts" ComponentType="TextBlock"/>
                    </MSU:MultiListbox.ColumnDefinitions>
                    <MSU:MultiListbox.ItemsContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Move Directory" Click="mnuMoveDirectory_Click"/>
                            <MenuItem Header="Add to Selected Directories" Click="mnuAddToSelected_Click"/>
                        </ContextMenu>
                    </MSU:MultiListbox.ItemsContextMenu>
                </MSU:MultiListbox>
                <MSU:MultiListbox x:Name="msuSchedules" Header="Active Schedules" 
                  Width="560" Canvas.Top="168"  VerticalContentAlignment="Bottom" 
                   Height="218" HorizontalAlignment="Center" ItemHeight="15" VerticalAlignment="Top" >
                    <MSU:MultiListbox.ColumnDefinitions>
                        <MSU:MultiListboxColumnDefinition DataField="Id" Width="0" ComponentType="TextBlock"/>
                        <MSU:MultiListboxColumnDefinition HeaderText="Shorts Directory" 
                           WidthBinding="MultiShortsDirectoryNameWidth"
                           ContentVerticalAlignment="Center" DataField="DirectoryName"
                            FontWeight="AutoFontWeight" Foreground="AutoFontColor"
                            ComponentType="TextBlock"/>
                        <MSU:MultiListboxColumnDefinition HeaderText="Number of Shorts" 
                 ContentHorizontalAlignment="Center" FontWeight="AutoFontWeight" Foreground="AutoFontColor"
                 DataField="NumberOfShorts" Width="105" ComponentType="TextBlock"/>
                        <MSU:MultiListboxColumnDefinition HeaderText="    Title" Width="50" 
                   Style="{StaticResource ToggleSetEditStyle}" 
                   Click="Title_ToggleButtonClick" DataField="IsTitleAvailable" ComponentType="ToggleButton"/>
                        <MSU:MultiListboxColumnDefinition HeaderText="    Desc" Width="50"
                  Click="Desc_ToggleButtonClick" Style="{StaticResource ToggleSetEditStyle}"
                  DataField="IsDescAvailable" ComponentType="ToggleButton"/>
                        <MSU:MultiListboxColumnDefinition HeaderText="        Last Uploaded" FontWeight="AutoFontWeight"  Foreground="AutoFontColor"
                   ContentVerticalAlignment="Center" ContentHorizontalAlignment="Center" 
                   DataField="LastUploadedFile" Width="180" ComponentType="TextBlock"/>
                    </MSU:MultiListbox.ColumnDefinitions>
                    <MSU:MultiListbox.ItemsContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Upload Selected" Click="mnuUploadSelected_Click"/>
                            <MenuItem Header="Remove Selected Directories" Click="mnuRemoveSelected_Click"/>
                            <MenuItem Header="Make Active" Click="mnuMakeActive_Click"/>
                            <MenuItem Header="Remove Schedule" Click="mnuRemoveSchedule"/>
                            <MenuItem Header="Change Schedules(Test)" Click="mnuChangeSchedule"/>
                            <Separator/>
                            <MenuItem Header="Open Directory" Click="mnuOpenDirectory_Click"/>
                            <MenuItem Header="Run File Fixer" Click="mnuFileFix_Click"/>
                            <MenuItem Header="Move Orphan Files To Active Directory" Click="mnuMoveOrphanFiles_Click"/>
                        </ContextMenu>
                    </MSU:MultiListbox.ItemsContextMenu>
                </MSU:MultiListbox>
                <ToggleButton x:Name="tbDebug" Width="44" Height="44" Canvas.Left="219" LostFocus="tbDebug_LostFocus"
                              Canvas.Top="379" HorizontalAlignment="Left" VerticalAlignment="Center" 
                              Style="{StaticResource ToggleStepStyle}" ToolTip="Debug Mode" Click="tbDebug_Click"/>
                <Button Name="BtnClose" Content="Close" HorizontalAlignment="Left" VerticalAlignment="Center" Height="36" Width="58" Click="BtnClose_Click" Canvas.Left="487" Canvas.Top="386"/>
                <Button x:Name="BtnRunUploaders" Content="Upload" HorizontalAlignment="Left" VerticalAlignment="Center" Height="36" Width="46" Click="BtnRunUploaders_Click" Canvas.Left="4" Canvas.Top="386"/>
                <Label x:Name="lblupload" Content="Uploads Per Slot" HorizontalAlignment="Left" VerticalAlignment="Center" Canvas.Left="261" Canvas.Top="388"/>
                <TextBox x:Name="txtMaxUpload" Text="5" TextWrapping="Wrap" 
            KeyDown="txtMaxUpload_KeyDown" LostFocus="txtMaxUpload_LostFocus" VerticalAlignment="Center" HorizontalAlignment="Left" Width="20" Height="20" Canvas.Left="352" Canvas.Top="390"/>
                <Label x:Name="lblmax" Content="Max Uploads" VerticalAlignment="Center" HorizontalAlignment="Left" Canvas.Left="370" Canvas.Top="388"/>
                <TextBox x:Name="txtTotalUploads" Text="100" TextWrapping="Wrap" 
            KeyDown="txtTotalUploads_KeyDown" VerticalAlignment="Center" 
                             HorizontalAlignment="Left" Width="27" Height="20" Canvas.Left="445" Canvas.Top="390"/>
                <Label x:Name="lblUploaded" Content="Last Upload:" Canvas.Left="473" Canvas.Top
                       ="386" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="14" Background="Transparent" Foreground="#FFFF1414" FontWeight="Bold"/>
                <Button x:Name="btnSchdule" Content="Schedule" Height="36" Width="51" Click="btnSchdule_Click" Canvas.Left="56" Canvas.Top="386" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <Button x:Name="BtnScrapeDrafts" Height="36" Width="41" Click="BtnScrapeDrafts_Click" 
                        Canvas.Left="112" Canvas.Top="386" HorizontalAlignment="Left" VerticalAlignment="Center">
                    <Canvas Width="36" Height="36">
                        <TextBlock Text="Scrape" HorizontalAlignment="Left" VerticalAlignment="Center" Canvas.Top="1" 
                                   Canvas.Left="2"/>
                        <TextBlock Text="Drafts" Canvas.Left="4" Canvas.Top="14" HorizontalAlignment="Left" 
                                   VerticalAlignment="Center"/>
                    </Canvas>
                </Button>
                <Button x:Name="btnSchduleScraper" Height="36" Width="51" Click="btnSchduleScraper_Click" 
                        Canvas.Left="158" Canvas.Top="386" HorizontalAlignment="Left" VerticalAlignment="Center">
                    <Canvas Width="48" Height="36">
                        <TextBlock Text="Schedule" HorizontalAlignment="Left" VerticalAlignment="Center" Canvas.Top="1" Canvas.Left="2"/>
                        <TextBlock Text="Scraper" Canvas.Left="6" Canvas.Top="14" HorizontalAlignment="Left" 
                             VerticalAlignment="Center"/>
                    </Canvas>
                </Button>
            </Canvas>
        </Grid>
    </ScrollViewer>
</Window>
